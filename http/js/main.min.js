$(document).ready(function(){function c(a){var b=$("#post-editor").next().children().first().html(),c=b.lastIndexOf("@"),d=b.substr(0,c),e=$(a).find("small").text();$("#post-editor").next().children().first().html(d+e+" "),$("#dummy-post").html(d+e.replace(/\n/g,"<br />").replace(/(#\w+)/g," <a href='#'>$1</a>").replace(/(@\w+)/g," <span class='post_user_link '><b><a  href='#'>$1</a></b></span>")),$("#post-editor").focus(),$("#people-result").html(""),$("#people-result").addClass("hidden-xs-up")}function g(b,c,d,e){switch(d){case"otp":$("#myModal").modal({backdrop:"static",keyboard:!1,show:!0});break;case"otp1":$("#otpModal").modal({backdrop:"static",keyboard:!1,show:!0});break;case"otp2":$("#otpModal").modal("hide");break;case"load_picture":$("#profile_pic_upload").children().first().remove(),$("#profile_pic_upload").children().first().removeClass("hidden-xs-up"),$("#profile_pic_upload").children().first().attr("src",b);break;case"load_wall":$("#wall_pic_upload").children().first().remove(),$("#wall_pic_upload").children().first().removeClass("hidden-xs-up"),$("#wall_pic_upload").children().first().attr("src",b);break;case"post-common":break;case"comment":$(c).prev().prev().children().last().remove();var f=$(c).prev().prev().prev().prev().find(".comment"),g=parseInt($(f).text());$(f).find("small").text(g+1),$(f).hasClass("commented")||$(f).addClass("commented");var h="";0==g&&(h+='<div class="mt-0  mb-0 hr-custom"> </div>'),h+='<div class="pt-0_5 b-lightgrey">',user.comment=b.comment,user.csrf=csrf,user.post_id=b.post_id,user.comment_id=b.id,user.username=user.username.replace("/@",""),h+=commentTemplate(user),h+="</div>",$(c).prev().prev().append(h),$(".grid1").masonry(),$(e).prop("disabled",!1);break;case"loadmore":if(b.length){b.length<4&&$(c).children(".loadmore").addClass("hidden-xs-up");var h="";$.each(b,function(a,b){h+='<div class="pt-0_5 b-lightgrey">',h+=commentTemplate(b),h+="</div>"});var i=$(c).children(".loadmore").children().next().html(),j=i.indexOf(" "),k=i.substring(j,i.length),l=parseInt(i.substring(0,j));l+=b.length,$(c).children(".loadmore").children().next().html(l+" "+k),$(c).next().prepend(h),$("input[name='load']",c).val(parseInt($("input[name='load']",c).val())+1)}else $(c).children(".loadmore").addClass("hidden-xs-up");try{$(".grid1").masonry(),$(".grid01").masonry(),$(".grid02").masonry(),$(".grid2").masonry()}catch(a){}break;case"post_init":$("#myModal").find("textarea[name='postText']").val(""),$("#myModal").find("input[type='submit']").prop("disabled",!1),$("#dummy-post").html(""),$("#dummy-image").html(""),$("#sortable").html(""),$("#dummy_time").html("1 s ago"),$("#dummy_like").html(0),$("#dummy_dislike").html(0),$("#dummy_comment").html(0),$("#post-editor").next().children().first().html(""),a="";break;case"post":var m=$("#post-editor").next().children().first().html();if(m=smilieEncode(m),a)$("#myModal").modal("hide"),$(a).closest(".container-fluid").next(".pt-0_5").remove(),$(a).closest(".container-fluid").next().children("p").text(m),b.post_data.length&&$(a).closest(".container-fluid").after(post_imageTemplate(b.post_data)),$("#post-editor").next().children().first().html(""),$("#dummy-post").html(""),$("#dummy-image").html(""),$("#sortable").html(""),a="",$(".grid1").masonry();else{$("#myModal").modal("hide"),user.post_text=m,user.likes=0,user.dislikes=0,user.comments=0,user.isliked=0,user.isdisliked=0,user.iscommented=0,user.post_id=b.id,user.csrf=csrf,user.post_data=b.post_data,user.post_time="1 s ago",$("#post-editor").next().children().first().html("");var n=$(postTemplate(user,1));$(".grid1").prepend(n).masonry("prepended",n),$("#dummy-post").html(""),$("#dummy-image").html(""),$("#sortable").html("")}$(e).prop("disabled",!1),commentInit();break;case"newPost":$("#new_posts").hasClass("hidden-xs-up")||$("#new_posts").addClass("hidden-xs-up"),$("#homecountTop").hasClass("hidden-xs-up")||$("#homecountTop").addClass("hidden-xs-up"),$("#homecount").hasClass("hidden-xs-up")||$("#homecount").addClass("hidden-xs-up"),$("#new_posts").html("0"),$("#homecountTop").html("0"),$("#homecount").html("0");var o=null;$.each(b,function(a,b){o=b.post_id;var c=$(postTemplate(b));$(".grid1").append(c).masonry("prepended",c)}),$("#new_posts").prev().val(o),commentInit();break;case"chat":break;case"chat-app":var p=b[1];$("#chat-app").children("a").next().next().children("span").text(anonymousTagTemplate(b[2])),$("#chat-app").children().last().removeClass("hidden-xs-up"),$("#chat-app").children("a").next().next().children("small").html(""),$("#chat-app").children().last().children("form").children().next().next().val(p),$("#chat-app").children("a").next().next().attr("href","/@"+b[4]),$("#chat-app").children("img").attr("src",b[3]),$("#chat-app").children("img").attr("alt",b[2]),$("#chat-app").next().attr("id","conversation_"+p),$("#chat-app").next().next().children("form").children("input:nth-child(2)").val(p);var q=$("#chat-app").next().next().children("form").children("input:nth-child(1)").val();$("#chats-list").addClass("hidden-sm-down"),$("#chats-content").removeClass("hidden-sm-down");var r="#conversation_"+p;$(r).find(".chat-content").html(""),$(r).find(".chat-content").html(""),load_prev_msg(p,q,!0),Rmessagelist[p]=[],chat_app_conversation_id=p;var s=1;if($(".message_app_users").each(function(a,b){p==$(b).attr("conversation-id")&&(s=0)}),s){var h='<div  class="message_app_users cursor-pointer list-group-item p-0 bb-1 border-light square-corner list-group-item-action" conversation-id="'+p+'" user-id="'+b[4]+'"> <ul class="nav  nav-inline p-0_5"> <li class="nav-item align-top "> <img class="rounded-circle pp-40" src="'+b[3]+'" alt="'+b[2]+'"> </li> <li class="nav-item mx-0 online_width-s"> <div class="lh-1 pl-0_5 "> <p class="m-0 p-0 comment_link ">'+b[2]+'</p> <small class="text-muted opensanN"></small> </div> </li> <li class="nav-item float-xs-right pl-0 pr-0_5"><small class="text-muted opensanL">1 S</small> </li> </ul> </div> ';$("#chat-app-scroll1").find(".list-group").prepend(h)}chatPersons(),$.ajax({type:"POST",url:"/check-all",data:{conversation_id:p,_token:csrf},success:function(a){var b=parseInt($("#messagecount").html());b>0&&($("#messagecount").html(b-1),$("#messagecountTop").html(b-1)),b<2&&($("#messagecount").hasClass("hidden-xs-up")||($("#messagecount").addClass("hidden-xs-up"),$("#messagecountTop").addClass("hidden-xs-up")))},error:function(a){},complete:function(){}});break;case"chatting":case"chatting1":$(c).closest(".msgbox").prev().find(".chat-content").children(".chat-msg-box.me").last().attr("id","message-"+b.id),$(c).closest(".msgbox").prev().find(".chat-content").children(".chat-msg-box.me").last().find(".detailmsg").html(b.time+" "+b.status),messagelist.push(b.id),jQuery($(c).closest(".msgbox").prev().children().first()).scrollTop(15e5);break;case"follow":$(c).find("button").hasClass("btn-primary")?($(c).find("button").html('<i class="fa fa-user-plus  " aria-hidden="true"></i> Following'),$(c).find("button").removeClass("btn-primary"),$(c).find("button").addClass("btn-secondary"),$(c).find("button").addClass("unfollow"),$("#user_followers").html('<i class="fa fa-users " aria-hidden="true"></i> '+(parseInt($("#user_followers").text())+1))):($(c).find("button").html('<i class="fa fa-user-plus  " aria-hidden="true"></i> Follow'),$(c).find("button").addClass("btn-primary"),$(c).find("button").removeClass("btn-secondary"),$(c).find("button").removeClass("btn-danger"),$(c).find("button").removeClass("unfollow"),$("#user_followers").html('<i class="fa fa-users " aria-hidden="true"></i> '+(parseInt($("#user_followers").text())-1)));break;case"block":console.log($(c).find(".dropdown-menu  button").text()),"Block"==$(c).find(".dropdown-menu button").text().trim()?$(c).find(".dropdown-menu button").html('<i class="fa fa-ban" aria-hidden="true"> </i> Unblock'):$(c).find(".dropdown-menu button").html('<i class="fa fa-ban" aria-hidden="true"> </i> Block');break;case"unblock":$(c).remove();break;case"facematch":$("#facematchModal").modal("hide");break;case"report":$("#reportModal").modal("hide");break;case"post_upload":$("#sortable").children("li").last().remove(),$("#sortable").append(image_uploadTemplate(b)),$("#dummy-image").html('<img class="img-fluid w-100" src="'+b.image+'" alt="image">');break;case"comment_del":if(b){var f=$(c).closest(".commentblock").prev().prev().find(".comment"),g=parseInt($(f).text());$(f).find("small").text(g-1),$(f).hasClass("commented")&&$(f).removeClass("commented"),1==$(c).closest(".commentblock").children(".b-lightgrey").length?$(c).closest(".container-fluid").remove():$(c).closest(".container-fluid").parent().remove()}$(".grid1").masonry();break;case"post_del":b&&$(c).closest(".card").remove(),$(".grid1").masonry();break;case"post_req":if(b&&($("#myModal").modal("show"),$("#myModal").find("textarea").val(b[0].post_text),$("#dummy-post").html(b[0].post_text),$("#dummy_time").html(b[0].post_time),$("#dummy_like").html(b[0].likes),$("#dummy_dislike").html(b[0].dislikes),$("#dummy_comment").html(b[0].comments),a=c,b[0].post_data.length)){var t=[];t.csrf=csrf,t.image_id=b[0].post_data[0].source_id,t.image=b[0].post_data[0].source,$("#sortable").append(image_uploadTemplate(t)),$("#dummy-image").html(post_imageTemplate(b[0].post_data))}break;case"upload_profile_picture":var b=$("#profile_pic_upload").children().first().attr("src");$(".myprofile").attr("src",b),$("#userinfo").find("img").attr("src",b),user.user_picture=b,$("#profilepicModal").modal("hide");break;case"upload_wall_picture":var b=$("#wall_pic_upload").children().first().attr("src");b="url('"+b+"')",$(".profile-wall").attr("style",""),$(".profile-wall").css("background",b),$(".profile-wall").css("background-size","cover"),$("#wallModal").modal("hide");break;case"Unfollow_Post":$(c).remove();break;case"followers":if("-1"==b)$("#profileList").html('<div class="text-xs-center w-100"><i class="fa fa-lock fa-3x" aria-hidden="true"></i></div>'),$("#profileListModal").find(".modal-title").text("Followers"),$("#profileListModal").modal("show");else{var h="";$.each(b,function(a,b){h+=profilelistTemplate(b)}),$("#profileList").html(h),$("#profileListModal").find(".modal-title").text("Followers"),$("#profileListModal").modal("show")}break;case"following":if("-1"==b)$("#profileList").html('<div class="text-xs-center w-100"><i class="fa fa-lock fa-3x" aria-hidden="true"></i></div>'),$("#profileListModal").find(".modal-title").text("Followers"),$("#profileListModal").modal("show");else{var h="";$.each(b,function(a,b){h+=profilelistTemplate(b)}),$("#profileList").html(h),$("#profileListModal").find(".modal-title").text("Following"),$("#profileListModal").modal("show")}break;case"facematches":if("-1"==b)$("#profileList").html('<div class="text-xs-center w-100"><i class="fa fa-lock fa-3x" aria-hidden="true"></i></div>'),$("#profileListModal").find(".modal-title").text("Followers"),$("#profileListModal").modal("show");else{var h="";$.each(b,function(a,b){h+=profilelistTemplate1(b)}),$("#profileList").html(h),$("#profileListModal").find(".modal-title").text("FaceMatches"),$("#profileListModal").modal("show")}break;case"chat_allow":getMessages(),$(c).parent().next().removeClass("hidden-xs-up"),$(c).parent().remove();var u=parseInt($("#messagecount").html());u>0&&($("#messagecount").html(u-1),$("#messagecountTop").html(u-1)),u<2&&($("#messagecount").hasClass("hidden-xs-up")||($("#messagecount").addClass("hidden-xs-up"),$("#messagecountTop").addClass("hidden-xs-up")));break;case"chat_block":$(c).parent().parent().parent().prev().children().first().trigger("click"),$("#chat-app").children().last().addClass("hidden-xs-up"),$("#chat-app").children().last().children("form").children().next().next().val("-1"),$("#chat-app").children("a").next().next().children("span").text(""),$("#chat-app").children("a").next().next().children().last().html(""),$("#chat-app").children("a").next().next().attr("href",""),$("#chat-app").children("img").attr("src","http://res.cloudinary.com/fabits-in/image/upload/v1/fabits/blank.jpg"),$("#chat-app").children("img").attr("alt",""),$("#chat-app").next().attr("id","-1"),$("#chat-app").next().next().children("form").children("input:nth-child(2)").val("-1"),chat_app_conversation_id=null,$("#chat-app").next().children().children(".chat-content").html(""),$("#chat-app").next().children(".chat-content").html("");break;case"chat_block1":$("#chat-app").children("a").next().next().children("span").text(""),$("#chat-app").children().last().addClass("hidden-xs-up"),$("#chat-app").children("a").next().next().children().last().html(""),$("#chat-app").children("a").next().next().attr("href",""),$("#chat-app").children("img").attr("src","http://res.cloudinary.com/fabits-in/image/upload/v1/fabits/blank.jpg"),$("#chat-app").children("img").attr("alt",""),$("#chat-app").next().attr("id","-1"),$("#chat-app").next().next().children("form").children("input:nth-child(2)").val("-1"),$("#chat-app").next().children().children(".chat-content").html(""),$("#chat-app").next().children(".chat-content").html("");var s=1;$(".message_app_users").each(function(a,b){if(chat_app_conversation_id==$(b).attr("conversation-id")){b.remove();var c=parseInt($("#messagecount").html());c>0&&($("#messagecount").html(c-1),$("#messagecountTop").html(c-1)),c<2&&($("#messagecount").hasClass("hidden-xs-up")||($("#messagecount").addClass("hidden-xs-up"),$("#messagecountTop").addClass("hidden-xs-up")))}}),chat_app_conversation_id=null,$(c).parent().remove();break;default:c&&window.location.replace(c)}}function h(a,b,c,d){switch(b){case"post_upload":$("#sortable").append('<li><div class="progress"> <div id="progressBar" class="progress-bar progressBar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">2% </div> </div></li>');break;case"load_picture":$("#profile_pic_upload").children().first().addClass("hidden-xs-up"),$("#profile_pic_upload").prepend('<div class="progress"> <div id="progressBar" class="progress-bar progressBar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">2% </div> </div>');break;case"load_wall":$("#wall_pic_upload").children().first().addClass("hidden-xs-up"),$("#wall_pic_upload").prepend('<div class="progress"> <div id="progressBar" class="progress-bar progressBar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">2% </div> </div>');break;case"post":itsme=1,$(d).prop("disabled",!0);break;case"post-common":if("1"==c){var e=$(a),f=$(e).children("small"),g=$(a).closest("li").next("li").find(".post-feature-common"),h=$(g).find("small");if($(g).hasClass("disliked")&&$(h).text(parseInt($(h).text())-1),$(e).hasClass("liked"))if($(f).text(parseInt($(f).text())-1),$(e).removeClass("liked"),$(g).removeClass("disliked"),0==parseInt($(f).text()))$(a).closest(".container-fluid").next().html(""),$(".grid1").masonry();else{var i=$(a).closest(".container-fluid").next().children().children().children();$.each(i,function(a,b){"me"==$(b).attr("data-me")&&$(b).remove()})}else{if(0==parseInt($(f).text())){var j='<div class="row mb-1"><div class="col-xs-12 ">';j+='<a href="/like/'+$(a).closest("form").children().next().val()+'" data-loc="like_list" class="d-inline like_list  ba-1 border-light sd-min cursor-pointer"><b>+</b></a>',j+="</div></div>",$(a).closest(".container-fluid").next().html(j)}var k='<img class="rounded-circle pp-30 mr-0_5" src="'+user.user_picture+'" alt="'+user.user_name+'"  data-me="me" data-toggle="tooltip" data-placement="top" title="'+user.user_name+'">';$(a).closest(".container-fluid").next().children().children().prepend(k),$('[data-toggle="tooltip"]').tooltip(),$(".grid1").masonry(),$(f).text(parseInt($(f).text())+1),$(e).addClass("liked"),$(g).removeClass("disliked")}}else if("0"==c){var g=$(a),h=$(g).children("small"),e=$(a).closest("li").prev("li").find(".post-feature-common"),f=$(e).find("small");if($(e).hasClass("liked")&&$(f).text(parseInt($(f).text())-1),$(g).hasClass("disliked"))$(h).text(parseInt($(h).text())-1),$(g).removeClass("disliked"),$(e).removeClass("liked");else if($(h).text(parseInt($(h).text())+1),$(g).addClass("disliked"),$(e).removeClass("liked"),0==parseInt($(f).text()))$(a).closest(".container-fluid").next().html(""),$(".grid1").masonry();else{var i=$(a).closest(".container-fluid").next().children().children().children();$.each(i,function(a,b){"me"==$(b).attr("data-me")&&$(b).remove()})}}break;case"facematch":$("#facematchModal").modal("hide");break;case"comment":if(c.length>0){var l=$(a).prev().prev().prev().prev().find(".comment"),m=parseInt($(l).text()),j="";0==m&&(j+='<div class="mt-0  mb-0 hr-custom"> </div>'),j+='<div class="pt-0_5 b-lightgrey">',user.comment=c,user.csrf=csrf,user.post_id="",user.comment_id="",j+=commentTemplate(user),j+="</div>",$(a).prev().prev().append(j);try{$(".grid1").masonry(),$(".grid01").masonry(),$(".grid02").masonry(),$(".grid2").masonry()}catch(a){}$(d).prop("disabled",!0)}break;case"chatting":case"chatting1":if(c.length>0){var n=[];n.message=c,n.id=0,n.time="1s ago",n.status="S",$(a).closest(".msgbox").prev().find(".chat-content").append(messageTemplate(n,0)),jQuery($(a).closest(".msgbox").prev().children().first()).scrollTop(15e5)}}}function i(a){switch(a){case"page-menu":$("#collapse").hasClass("in")||$("#collapse").addClass("in")}}function j(a,b){switch(b){case"settings":a&&($("#settings-content").html(a),$("#settings-list").addClass("z-10"),$("#settings-list").removeClass("z-11"),$("#settings-content").addClass("z-11"),$("#settings-content").removeClass("z-10"));break;case"settings-back":$("#settings-list").addClass("z-11"),$("#settings-list").removeClass("z-10"),$("#settings-content").addClass("z-10"),$("#settings-content").removeClass("z-11");break;case"chats-back":$("#chats-list").removeClass("hidden-sm-down"),$("#chats-content").addClass("hidden-sm-down"),chat_app_conversation_id=null;break;case"page":$(window).off("scroll"),$("#page").html(""),$("#page").html(a),$("#profileListModal").modal("hide"),$("#likeModal").modal("hide"),$(document).prop("title",$("#ajax-title").attr("data-title"));break;case"page-menu":$(window).off("scroll"),$("#page").html(""),$("#page").html(a),$('[data-toggle="tooltip_custom"]').tooltip("hide"),$(document).prop("title",$("#ajax-title").attr("data-title"));break;case"like_list":var c="";$.each(a,function(a,b){c+='<a href="/@'+b.username+'" data-loc="page" class="ba-0 px-1 my-1 py-0 square-corner list-group-item ">'+likelistTemplate(b)+"</a>"}),$("#likedby").html(c),$("#likeModal").modal("show")}}function k(a,b,c){var d=a,e=b,f=$(window).height(),g=$(window).width(),h=0,i=0,j=d,k=e;h=d<f/2?0:f-60,i=e<g/2?0:g-60,k<j?k<f-j?h=j:i=k:g-k>j?i=k:g-k>f-j?i=k:h=j,$(c).animate({left:i+"px",top:h+"px"}),$(c).next().animate({left:i-130+"px",top:h+50+"px"});var l={X:i+"px",Y:h+"px",id:$(c).next().find("button").attr("conversation-data"),picture:$(c).find("img").attr("src"),name:$(c).next().find("button").next("a").text().trim(),href:$(c).next().find("button").next("a").attr("href"),auth:$(c).attr("data-auth")};chatAjaxSession(l,1)}$("#myModal").on("shown.bs.modal",function(){$("#post-editor").next().children().first().focus()}),screen_size>989&&window.addEventListener("popstate",function(a){location.reload()}),$(document).on("click focus",".emojionearea-editor",function(){$(this).next().hasClass("active")&&$(this).next().trigger("click"),screen_size<989&&$("#floatPostButton").addClass("hidden-xs-up")}),$(document).on("blur",".emojionearea-editor",function(){screen_size<989&&$("#floatPostButton").removeClass("hidden-xs-up")}),$("#post-editor").emojioneArea({pickerPosition:"bottom",autocomplete:!1,events:{click:function(a,b){var c=$("#post-editor").next().children().first().html();c=smiliefy(c);var d=c;d=d.replace(/\n/g,"<br />"),d=hashTag(d),d=attherate(d),d=urlify(d),d=smilies(d),$("#dummy-post").html(d)}}}),$(window).on("navigate",function(a,b){var c=b.state.direction;"back"==c&&(location.reload(),b.state.direction=null),"forward"==c&&(location.reload(),b.state.direction=null)});var a="",b=0;$(document).on("click",".comment",function(a){$(this).closest(".container-fluid").next().next().find(".loadmore").trigger("click"),$(this).closest(".container-fluid").next().next().next().removeClass("hidden-xs-up"),$(this).closest(".container-fluid").next().next().find(".loadmore").removeClass("hidden-xs-up"),$(this).closest(".container-fluid").next().next().next().next().children(".container-fluid").removeClass("hidden-xs-up"),$(this).closest(".container-fluid").next().next().next().next().children(".container-fluid").find("input[type='text']").val(""),$(this).closest(".container-fluid").next().next().next().next().children(".container-fluid").find("input[type='text']").next().children().first().focus(),$(this).closest(".container-fluid").next().next().next().next().children(".container-fluid").find("input[type='text']").next().children().first().html("");try{$(".grid1").masonry(),$(".grid01").masonry(),$(".grid02").masonry(),$(".grid2").masonry()}catch(a){}var b=$(this).closest(".container-fluid").next().next().next().next().children(".container-fluid").find("input[type='text']");$(b).next().hasClass("emojionearea")&&$(b).unbind(),$(b).emojioneArea({pickerPosition:"top",autocomplete:!1,inline:!0}),$(b).next().next().hasClass("emojionearea")&&($(b).next().remove(),$(b).next().children().first().html(""),$(b).next().children().first().attr("placeholder","Comment"))}),$(document).click(function(a){b||$("#search-result").hide(),b=0}),$("#search-result").click(function(a){b=1}),$("#u-search").click(function(a){b=1}),$(document).on("mouseover","#people-result li",function(){$("#people-result li").removeClass("selected"),$(this).addClass("selected")}),$(document).on("click","#people-result li",function(){c($(this))}),$(document).on("click",".myNotification",function(){$(this).hasClass("b-lightgrey-new")&&$(this).removeClass("b-lightgrey-new")}),$(document).on("keydown","#people-result li",function(){13==event.which&&c($(this))}),$(document).on("keyup",".emojionearea-editor",function(a){"post-editor"!=$(this).parent().prev().attr("id")&&13==a.keyCode&&$(this).submit()}),$(document).on("keyup",$("#post-editor").next().children().first(),function(a){var b=$("#post-editor").next().children().first().text(),d=b.lastIndexOf("@");if(b=b.substr(d+1,b.length),d>=0)if(b.indexOf(" ")>=0)$("#people-result").hasClass("hidden-xs-up")||$("#people-result").addClass("hidden-xs-up");else{if($("#people-result").hasClass("hidden-xs-up")&&$("#people-result").removeClass("hidden-xs-up"),13==a.which){var e=$(".selected");c($(e))}if(38!=a.keyCode&&40!=a.keyCode){var f=b,g="/search/"+f+"/true";$.getJSON(g,function(a){$("#people-result").html("");var b=0;$.each(a,function(a,c){$("#people-result").append(people_result(c,++b))})})}}if(38==a.keyCode){var e=$(".selected");$("#people-result li").removeClass("selected"),0==e.prev().length?e.siblings().last().addClass("selected"):e.prev().addClass("selected")}if(40==a.keyCode){var e=$(".selected");$("#people-result li").removeClass("selected"),0==e.next().length?e.siblings().first().addClass("selected"):e.next().addClass("selected")}var h=$("#post-editor").next().children().first().html();h=smiliefy(h);var i=h;i=i.replace(/\n/g,"<br />"),i=hashTag(i),i=attherate(i),i=urlify(i),i=smilies(i),$("#dummy-post").html(i)}),$(document).on("keyup","#chat-editor",function(a){13==a.keyCode&&$(this).submit()}),$(document).on("keyup",".chatPing",function(a){13==a.keyCode&&$(this).submit()}),$(document).on("click",".online_users",function(a){$(this).closest("form").submit()}),$(document).on("click","#chat-n",function(a){$(this).attr("value",!0),$("#chat-a").attr("value",!1)}),$(document).on("click","#chat-a",function(a){$(this).attr("value",!0),$("#chat-n").attr("value",!1)}),$("#sliderMenu").click(function(a){$("#collapse").toggleClass("in")}),$("#openSearch").click(function(a){$("#searchDiv").toggleClass("hidden-md-down"),$("#sliderMenu").toggleClass("hidden-md-down"),$("#topbarHome").toggleClass("hidden-md-down"),$("#topbarNotification").toggleClass("hidden-md-down"),$("#topbarMessage").toggleClass("hidden-md-down"),$("#topbarSearch").toggleClass("hidden-md-down"),$("#u-search").focus()}),$("#closeSearch").click(function(a){$("#searchDiv").toggleClass("hidden-md-down"),$("#sliderMenu").toggleClass("hidden-md-down"),$("#topbarNotification").toggleClass("hidden-md-down"),$("#topbarHome").toggleClass("hidden-md-down"),$("#topbarMessage").toggleClass("hidden-md-down"),$("#topbarSearch").toggleClass("hidden-md-down")}),$(document).on("click",".remove_upload",function(a){var b=$(this).attr("data-id"),c=$(this).attr("csrf-id"),d=$(this);$(d).parent().remove(),$("#dummy-image").find("img").remove(),$.ajax({type:"POST",url:"/post_upload_remove",data:{image_id:b,_token:c},beforeSend:function(){},success:function(a){},error:function(a){$.each($.parseJSON(a.responseText),function(a,b){return $("#alert_message").html(alertTemplate(b[0])).hide(),$("#alert_message").fadeIn(),!1})}})});var d=1;$(document).on("click",".message_app_users",function(a){var b=$(this).children("ul").children("li").next().children().children("p").text().trim(),c=$(this).children("ul").children("li").children("img").attr("src");$(this).children("ul").children("li").next().next().children("span").hasClass("hidden-xs-up")||($(this).children("ul").children("li").next().next().children("span").addClass("hidden-xs-up"),$(this).children("ul").children("li").next().next().children("span").text(0));var e=$(this).attr("conversation-id"),f=anonymousTagTemplate(b);if(-1!=f.indexOf("Anonymous")?(f=f.substring(0,f.indexOf("<span")),f=f.split(" ")[0],f+='<span class="tag tag-danger tag-pill">Anonymous</span>'):f=f.split(" ")[0],$("#conversation_"+e)&&$("#conversation_"+e).parent().prev().children().first().trigger("click"),$("#recent-chat").children().each(function(a,b){parseInt($(b).attr("conversation-id"))==e&&($(this).children("ul").children("li").next().next().children("span").hasClass("hidden-xs-up")||($(this).children("ul").children("li").next().next().children("span").addClass("hidden-xs-up"),$(this).children("ul").children("li").next().next().children("span").text(0)))}),e!=chat_app_conversation_id){d=0,$("#chat-app-scroll").attr("data-limit","0"),$("#chat-app-scroll").attr("data-load","1");var g=parseInt($(this).attr("conversation-auth")),h="#conversation_"+e,i=$(this).attr("user-id");$("#chat-app").children("a").next().next().children("span").html(f),$("#chat-app").children("a").next().next().children("small").html(""),$("#chat-app").children().last().children("form").children().next().next().val(e),$("#chat-app").children("a").next().next().attr("href","/@"+i),$("#chat-app").children("img").attr("src",c),$("#chat-app").children("img").attr("alt",b),$("#chat-app").next().attr("id","conversation_"+e),$("#chat-app").next().next().children("form").children("input:nth-child(2)").val(e),$("#chat-app").children().last().removeClass("hidden-xs-up");var j=$("#chat-app").next().next().children("form").children("input:nth-child(1)").val();if($("#chats-list").addClass("hidden-sm-down"),$("#chats-content").removeClass("hidden-sm-down"),$(h).find(".chat-content").html(""),2==g&&load_prev_msg(e,j,!0),$(h).scrollbar(),1==g){var k="<div class=' w-100 auth text-xs-center '><form method='POST' action='/block_message' accept-charset='UTF-8' class ='d-inline form-inline' ><input name='_token' type='hidden' value='"+csrf+"'><input name='success' type='hidden' value='chat_block1'><input name='id' type='hidden' value='"+e+"'><button type='submit' class='btn btn-secondary mx-3 mt-3 px-3 '>Block</button></form><form method='POST' action='/allow_message' accept-charset='UTF-8' class ='d-inline form-inline' ><input name='_token' type='hidden' value='"+csrf+"'><input name='success' type='hidden' value='chat_allow'><input name='id' type='hidden' value='"+e+"'><button type='submit' class='btn btn-primary mx-3 px-3 mt-3'>Allow</button></form></div>";$("#chat-app").next().children().prepend(k)}Rmessagelist[e]=[],chat_app_conversation_id=e,chatPersons(),2==g&&$.ajax({type:"POST",url:"/check-all",data:{conversation_id:e,_token:csrf},success:function(a){var b=parseInt($("#messagecount").html());b>0&&($("#messagecount").html(b-1),$("#messagecountTop").html(b-1)),b<2&&($("#messagecount").hasClass("hidden-xs-up")||($("#messagecount").addClass("hidden-xs-up"),$("#messagecountTop").addClass("hidden-xs-up")))},error:function(a){},complete:function(){}})}}),$(document).on("keyup","#u-search",function(a){var b=$("#u-search").val();if(b.length>1){$("#search-result").show(),$("#search-result").width($("#u-search").width()),$("#search-result").removeClass("hidden-xs-up");var b=$("#u-search").val();if(13==a.keyCode){var d="/search/"+b;0==b.indexOf("#")&&(d="/search/!"+b),$("#search-result").hide(),NProgress.start(),$.get(d,function(a){$("#page").html(a),history.pushState(null,null,d),NProgress.done()})}else if(0==b.indexOf("#")){b=encodeURIComponent(b);var d="/search/"+b+"/true";$.getJSON(d,function(a){$("#search-result").html(""),$.each(a,function(a,b){$("#search-result").append(tag_result(b))})})}else{var d="/search/"+b+"/true";$.getJSON(d,function(a){$("#search-result").html(""),$.each(a,function(a,b){$("#search-result").append(search_result(b))});var c="/search/"+b;$("#search-result").append("<div class='container-fluid border-light text-xs-center'> <a class='text-xs-center'  href='"+c+"' data-loc='page-full' >See more</a></div>")})}}else $("#search-result").addClass("hidden-xs-up")}),$(document).on("click",".chat-close",function(a){var b=parseInt($(this).attr("conversation-data")),c=chatlist.indexOf(parseInt(b));-1!=c&&chatlist.splice(c,1),$(this).closest(".float-chat").prev().remove(),$(this).closest(".float-chat").remove();var d={X:0,Y:0,id:b,picture:"",name:""};chatAjaxSession(d,-1)}),$(document).on("mouseenter",".unfollow",function(a){$(this).removeClass("btn-secondary"),$(this).addClass("btn-danger"),$(this).html('<i class="fa fa-user-plus  " aria-hidden="true"></i>  Unfollow')}),$(document).on("mouseleave",".unfollow",function(a){$(this).removeClass("btn-danger"),$(this).addClass("btn-secondary"),$(this).html('<i class="fa fa-user-plus  " aria-hidden="true"></i> Following')}),$("#chat-app-scroll").on("scroll",function(a){if(0==d)$("#chat-app-scroll").scrollTop(15e5),d=1;else{if(0==$(this).scrollTop()){var c=$(this);try{var e=$(this).parent().attr("id").split("_")[1]}catch(a){}var f=$(this).attr("data-load"),g=$(this).attr("data-limit"),h="#conversation_"+e;"0"==g&&0==isScrollIn&&e&&$.ajax({type:"POST",url:"/load_prev",data:{id:e,_token:csrf,load:f},beforeSend:function(){isScrollIn=1,$(h).find(".chat-content").prepend('<div class=" w-100 text-xs-center "> <i class="text-xs-center fa fa-circle-o-notch fa-2x fa-spin fa-fw"></i> </div> ')},success:function(a){if(a.length>0){a.reverse(),$(h).find(".chat-content").children().first().remove();var b=$(h).find(".chat-content").children().first().text();$(h).find(".chat-content").children().first().remove(),$.each(a,function(a,c){b!=c.time_tag?($(h).find(".chat-content").prepend(messageTemplate(c,c.me,b,!0)),b=c.time_tag):$(h).find(".chat-content").prepend(messageTemplate(c,c.me))});var d='<div class="w-100  text-xs-center "><small class="tag tag-default text-xs-center tag-pill">'+b+"</small></div>";$(h).find(".chat-content").prepend(d),$(c).attr("data-load",parseInt(f)+1)}else $(h).find(".chat-content").children().first().remove();a.length<10&&$(c).attr("data-limit","1"),$(c).scrollTop(10),isScrollIn=0}})}}});var e=1;$(document).on("mouseover keydown",".float-chat",function(a){if(e){var b=$(this).children().next().children().attr("id"),c=$(this).children().next().next().children().children().children().attr("value"),d=b.indexOf("_");b=b.substring(d+1,b.length),$.each(Rmessagelist[b],function(a,d){e=0,$.ajax({type:"POST",url:"/check-message",data:{id:d,_token:c},success:function(a){var c=Rmessagelist[b].indexOf(parseInt(d));-1!=c&&Rmessagelist[b].splice(c,1)},error:function(a){},complete:function(){e=1}})})}}),$(document).on("keydown",".msgbox",function(a){if(0==a.keyCode||32==a.keyCode){var b=$(this).find("form").children().next().attr("value"),c=$(this).find("form").children().attr("value");$.ajax({type:"POST",url:"/typing",data:{id:b,_token:c},success:function(a){},error:function(a){}})}}),$(document).on("mouseover keydown focus","#chats-content",function(a){if(e){var b=$(this).children().next().attr("id"),c=$(this).children().next().next().children().children().attr("value");try{var d=b.indexOf("_");b=b.substring(d+1,b.length),$.each(Rmessagelist[b],function(a,d){e=0,$.ajax({type:"POST",url:"/check-message",data:{id:d,_token:c},success:function(a){var c=Rmessagelist[b].indexOf(parseInt(d));-1!=c&&Rmessagelist[b].splice(c,1)},error:function(a){},complete:function(){e=1}})})}catch(a){}}}),$("#female").click(function(){$("#female").addClass("cust_border1"),$("#male").removeClass("cust_border"),$("#female").removeClass("cust_border"),$("#male").removeClass("cust_border1"),$("#Gender-val").val(0)}),$("#male").click(function(){$("#male").addClass("cust_border1"),$("#female").removeClass("cust_border"),$("#male").removeClass("cust_border"),$("#female").removeClass("cust_border1"),$("#Gender-val").val(1)}),$("#myModal").modal({show:!1}),$("#imageModal").on("show.bs.modal",function(a){var b=$(a.relatedTarget),c=b.data("img");$(this).find("img").attr("src",c)}),$("#reportModal").on("show.bs.modal",function(a){var b=$(a.relatedTarget),c=b.data("type"),d=$(this);if(d.find("textarea").val(""),$.each(d.find('input[type="radio"]'),function(){$(this).prop("checked",!1)}),"post"==c){var e=b.data("post_id");d.find(".post-type").children().first().attr("value",e),d.find(".post-type").removeClass("hidden-xs-up"),d.find(".fabits-type").hasClass("hidden-xs-up")||d.find(".fabits-type").addClass("hidden-xs-up")}"fabits"==c&&(d.find(".post-type").children().first().attr("value","-1"),d.find(".fabits-type").removeClass("hidden-xs-up"),d.find(".post-type").hasClass("hidden-xs-up")||d.find(".post-type").addClass("hidden-xs-up"))}),$("#notificationModal").on("show.bs.modal",function(a){$(a.relatedTarget);$("#notificationcount").hasClass("hidden-xs-up")||($("#notificationcount").addClass("hidden-xs-up"),$("#notificationcount").text("0"),$("#notificationTop").addClass("hidden-xs-up"),$("#notificationTop").text("0"))}),screen_size>989&&$('[data-toggle="tooltip_custom"]').tooltip();try{$("#chat-app-scroll").scrollbar()}catch(a){}var f="";$(document).on("click",".notificationMakeSlide",function(a){f=$(this).attr("data-slide"),$("#notificationSlide").carousel(1)}),$("#notificationModal").on("hidden.bs.modal",function(a){$("#notificationSlide").carousel(0)}),$("#notificationSlide").on("slide.bs.carousel",function(a){$("#notificationSliderPost").html(""),$.getJSON(f,function(a){$.each(a,function(a,b){$("#notificationSliderPost").html(postTemplate(b,0,1,1))})}).done(function(){commentInit()})}),$("body").on("click",function(a){if("popover"!==$(a.target).data("toggle")&&0==$(a.target).parents(".feedsPopup").length&&0===$(a.target).parents(".popover.in").length&&$("body").has(".popover").length)for(var b in popup1)popup1[b].open&&(popup1[b].open=!1,$("#"+popup1[b].id).trigger("click"))}),$(document).on("hidden.bs.popover",".feedsPopup",function(){for(var a in popup1)popup1[a].open&&(popup1[a].open=!1,$("#"+popup1[a].id).trigger("click"))}),$(document).on("show.bs.popover",".feedsPopup",function(){for(var a in popup1)popup1[a].open&&(popup1[a].open=!1,$("#"+popup1[a].id).trigger("click"));for(var a in popup1)$(this).attr("id")==popup1[a].id&&(popup1[a].open=!0,console.log(popup1[a].open));var b=$(this).attr("data-popup"),c=$(this);$.ajaxSetup({async:!1}),$.getJSON(b,function(a){$.each(a,function(a,b){$(c).attr("data-content",postTemplate(b,0,1))})}),$.ajaxSetup({async:!0})}),$(document).on("submit","form",function(a){a.preventDefault();var b=$("input[name='location']",this).val(),c=$("input[type='submit']",this),d=$("input[name='success']",this).val(),e="";"post-common"===d&&(e=b,b=$(this).find(".post-feature-common")),"comment"===d&&(c=$("button[type='submit']",this)),"post_upload"===d&&(c=$("button[type='button']",this)),"loadmore"!==d&&"comment"!==d&&"chat"!==d&&"follow"!==d&&"unblock"!==d&&"post_upload_remove"!==d&&"comment_del"!==d&&"post_req"!==d&&"post_del"!==d&&"Unfollow_Post"!==d&&"block"!==d&&"chat_block"!==d&&"chat_block1"!==d&&"chat_allow"!==d||(b=$(this));var f=new FormData;$($(this).prop("elements")).each(function(){if("file"==this.type)f.append(this.name,this.files[0]);else if("checkbox"==this.type)f.append(this.name,$(this).prop("checked"));else if("radio"==this.type)$(this).prop("checked")&&f.append(this.name,$(this).attr("value"));else if("post"===d&&"textarea"==this.type){var a=$(this).next().children().first().html();a=smilieEncode(a),f.append(this.name,a)}else if("comment"===d&&"text"==this.type){var a=$(this).next().children().first().html();a=smilieEncode(a),e=a,f.append(this.name,a),$(this).next().children().first().html("")}else if("chatting"===d&&"text"==this.type){var a=$(this).next().children().first().html();a=smilieEncode(a),e=a,f.append(this.name,a),$(this).next().children().first().html(""),$(this).next().children().first().focus()}else if("chatting1"===d&&"text"==this.type){var a=$(this).next().children().first().html();a=smilieEncode(a),e=a,f.append(this.name,a),$(this).next().children().first().html(""),$(this).next().children().first().focus()}else f.append(this.name,$(this).val())}),"chatting"!==d&&"chatting1"!==d||(b=$(this)),$.ajax({type:"POST",cache:!1,contentType:!1,processData:!1,url:$(this).attr("action"),data:f,beforeSend:function(){$("input[type='submit']").prop("disabled",!0),$("input[type='file']").prop("disabled",!0),$("#search-result").hide();var a=e;"comment"!==d&&"facematch"!==d&&"chatting"!==d&&"chatting1"!==d&&"post-common"!==d&&NProgress.start(),h(b,d,a,c)},success:function(a){"comment"!==d&&"chatting"!==d&&"chatting1"!==d&&"post-common"!==d&&NProgress.done(),g(a,b,d,c),$("input[type='submit']").prop("disabled",!1),$("input[type='file']").prop("disabled",!1)},xhr:function(){var a=$.ajaxSettings.xhr();return"post_upload"!==d&&"load_picture"!==d&&"load_wall"!==d||a.upload&&a.upload.addEventListener("progress",function(a){a.lengthComputable&&($(".progressBar").width(a.loaded/a.total*100+"%"),100==parseInt(a.loaded/a.total*100)?$(".progressBar").html("Compressing..."):$(".progressBar").html(parseInt(a.loaded/a.total*100)+"%"))},!1),a},error:function(a){$("input[type='submit']").prop("disabled",!1),$("input[type='file']").prop("disabled",!1),"comment"!==d&&"chatting"!==d&&"chatting1"!==d&&"post-common"!==d&&NProgress.done(),$.each($.parseJSON(a.responseText),function(a,b){return $("#alert_message").html(alertTemplate(b[0])),$("#alert_message").hide(),$("#alert_message").fadeIn(),$("#alert_message").css("opacity","1"),$("#alert_message").show(),$("#alert_message").fadeOut(5e3),!1})}})}),$(document).on("click","a",function(a){if("_blank"==$(this).attr("target"))return!0;a.preventDefault();var b=$(this).attr("data-loc"),c=$(this).attr("href");"page-full"==b&&(window.location.href=c),"page-exter"==b&&window.open(c,"_blank"),c.indexOf("#")&&window.location.href!==c?$.ajax({type:"GET",url:c,beforeSend:function(){$("#search-result").hide(),NProgress.start(),i(b)},success:function(a){NProgress.done(),"like_list"!=b&&history.pushState(null,null,c),j(a,b)},error:function(a){NProgress.done(),$.each($.parseJSON(a.responseText),function(a,b){return $("#alert_message").html(alertTemplate(b[0])),$("#alert_message").hide(),$("#alert_message").fadeIn(),$("#alert_message").css("opacity","1"),$("#alert_message").show(),$("#alert_message").fadeOut(5e3),!1})}}):j(null,b)}),$(document).on("dragstop",".awesome-chat",function(a,b){k(b.position.top,b.position.left,this)}),$(document).on("dragstart",".awesome-chat",function(a,b){$(this).next().hide()}),$(document).on("click",".awesome-chat",function(a,b){var c=$(this).css("top"),d=$(this).css("left");if(c=parseInt(c),d=parseInt(d),$(this).next().is(":visible"))$(this).next().fadeToggle(),k(c,d,this);else{var e=$(window).height(),f=$(window).width();c>=e-430&&(c=e-400),d>=f-175&&(d=f-175),d<140&&(d=140),$(this).next().find("input").focus(),$(this).next().css("left",d-130),$(this).next().css("top",c+50),$(this).animate({left:d+"px",top:c+"px"}),$(this).next().fadeToggle();var g=parseInt($(this).next().children().first().children().first().attr("conversation-data"));$(".online_users-recent").each(function(a,b){if(parseInt($(this).attr("conversation-id"))==g&&!$(this).children("ul").children("li").next().next().children("span").hasClass("hidden-xs-up")){console.log($(this).children("ul").children("li").next().next().children("span")),$(this).children("ul").children("li").next().next().children("span").addClass("hidden-xs-up"),$(this).children("ul").children("li").next().next().children("span").text(0);2==parseInt($(this).attr("conversation-auth"))&&$.ajax({type:"POST",url:"/check-all",data:{conversation_id:g,_token:csrf},success:function(a){var b=parseInt($("#messagecount").html());b>0&&($("#messagecount").html(b-1),$("#messagecountTop").html(b-1)),b<2&&($("#messagecount").hasClass("hidden-xs-up")||($("#messagecount").addClass("hidden-xs-up"),$("#messagecountTop").addClass("hidden-xs-up")))},error:function(a){},complete:function(){}})}}),$("#chat-app-scroll1").children().first().children().each(function(a,b){parseInt($(this).attr("conversation-id"))==g&&($(this).children("ul").children("li").next().next().children("span").hasClass("hidden-xs-up")||($(this).children("ul").children("li").next().next().children("span").addClass("hidden-xs-up"),$(this).children("ul").children("li").next().next().children("span").text(0)))})}jQuery($(this).next().children().next().children().first()).scrollTop(15e5),jQuery($(this).next().children().next().children().first()).scroll(function(a){if(0==$(this).scrollTop()){var c=$(this);try{var d=$(this).attr("id").split("_")[1]}catch(a){}var e=$(this).attr("data-load"),f="#conversation_"+d;"0"==$(f).find(".chat-content").attr("data-limit")&&0==isScrollIn&&d&&$.ajax({type:"POST",url:"/load_prev",data:{id:d,_token:csrf,load:e},beforeSend:function(){isScrollIn=1,$(f).find(".chat-content").prepend('<div class=" w-100 text-xs-center "> <i class="text-xs-center fa fa-circle-o-notch fa-2x fa-spin fa-fw"></i> </div> ')},success:function(a){if(a.length>0){a.reverse(),$(f).find(".chat-content").children().first().remove();var b=$(f).find(".chat-content").children().first().text();$(f).find(".chat-content").children().first().remove(),$.each(a,function(a,c){b!=c.time_tag?($(f).find(".chat-content").prepend(messageTemplate(c,c.me,b,!0)),b=c.time_tag):$(f).find(".chat-content").prepend(messageTemplate(c,c.me))});var d='<div class="w-100  text-xs-center "><small class="tag tag-default text-xs-center tag-pill">'+b+"</small></div>";$(f).find(".chat-content").prepend(d),$(c).attr("data-load",parseInt(e)+1)}else $(f).find(".chat-content").children().first().remove();a.length<10&&$(f).find(".chat-content").attr("data-limit","1"),$(c).scrollTop(10),isScrollIn=0}})}}),$(this).children().last().find("span").html(0),$(this).children().last().find("span").addClass("hidden-xs-up"),$(this).removeClass("shake-chunk"),$(this).removeClass("shake-constant"),$(this).removeClass("shake-constant--hover")}),$('a[href="#people-app"]').on("show.bs.tab",function(a){getOnline1()}),$(document).on("keyup","#filter",function(a){var b=$("#filter").val();$("#recent-chat").children().each(function(a,c){$(c).attr("data-filter").toLowerCase().indexOf(b.toLowerCase())>=0?$(c).fadeIn():$(c).fadeOut()}),$("#online").children("form").each(function(a,c){$(c).find(".online_users").attr("data-filter").toLowerCase().indexOf(b.toLowerCase())>=0?$(c).fadeIn():$(c).fadeOut()}),$("#feeds-data").children().each(function(a,c){$(c).attr("data-filter").toLowerCase().indexOf(b.toLowerCase())>=0?$(c).fadeIn():$(c).fadeOut()})}),$(document).on("keyup","#filter1",function(a){var b=$(this).val();$("#chat-app-scroll1").children().children().each(function(a,c){$(c).attr("data-filter").toLowerCase().indexOf(b.toLowerCase())>=0?$(c).fadeIn():$(c).fadeOut()}),$("#online1").children("form").each(function(a,c){$(c).find(".online_users").attr("data-filter").toLowerCase().indexOf(b.toLowerCase())>=0?$(c).fadeIn():$(c).fadeOut()})}),$(document).on("click",".more",function(){$(this).text("less..").siblings(".complete").show(),$(this).removeClass("more"),$(this).addClass("less"),$(".grid1").masonry()}),$(document).on("click",".less",function(){$(this).text("more..").siblings(".complete").hide(),$(this).removeClass("less"),$(this).addClass("more"),$(".grid1").masonry()})}),function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.NProgress=b()}(this,function(){function c(a,b,c){return a<b?b:a>c?c:a}function d(a){return 100*(-1+a)}function e(a,c,e){var f;return f="translate3d"===b.positionUsing?{transform:"translate3d("+d(a)+"%,0,0)"}:"translate"===b.positionUsing?{transform:"translate("+d(a)+"%,0)"}:{"margin-left":d(a)+"%"},f.transition="all "+c+"ms "+e,f}function h(a,b){return("string"==typeof a?a:k(a)).indexOf(" "+b+" ")>=0}function i(a,b){var c=k(a),d=c+b;h(c,b)||(a.className=d.substring(1))}function j(a,b){var d,c=k(a);h(a,b)&&(d=c.replace(" "+b+" "," "),a.className=d.substring(1,d.length-1))}function k(a){return(" "+(a&&a.className||"")+" ").replace(/\s+/gi," ")}function l(a){a&&a.parentNode&&a.parentNode.removeChild(a)}var a={};a.version="0.2.0";var b=a.settings={minimum:.08,easing:"linear",positionUsing:"",speed:350,trickle:!0,trickleSpeed:250,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};a.configure=function(a){var c,d;for(c in a)void 0!==(d=a[c])&&a.hasOwnProperty(c)&&(b[c]=d);return this},a.status=null,a.set=function(d){var h=a.isStarted();d=c(d,b.minimum,1),a.status=1===d?null:d;var i=a.render(!h),j=i.querySelector(b.barSelector),k=b.speed,l=b.easing;return i.offsetWidth,f(function(c){""===b.positionUsing&&(b.positionUsing=a.getPositioningCSS()),g(j,e(d,k,l)),1===d?(g(i,{transition:"none",opacity:1}),i.offsetWidth,setTimeout(function(){g(i,{transition:"all "+k+"ms linear",opacity:0}),setTimeout(function(){a.remove(),c()},k)},k)):setTimeout(c,k)}),this},a.isStarted=function(){return"number"==typeof a.status},a.start=function(){a.status||a.set(0);var c=function(){setTimeout(function(){a.status&&(a.trickle(),c())},b.trickleSpeed)};return b.trickle&&c(),this},a.done=function(b){return b||a.status?a.inc(.3+.5*Math.random()).set(1):this},a.inc=function(b){var d=a.status;return d?d>1?void 0:("number"!=typeof b&&(b=d>=0&&d<.25?(3*Math.random()+3)/100:d>=.25&&d<.65?3*Math.random()/100:d>=.65&&d<.9?2*Math.random()/100:d>=.9&&d<.99?.005:0),d=c(d+b,0,.994),a.set(d)):a.start()},a.trickle=function(){return a.inc()},function(){var b=0,c=0;a.promise=function(d){return d&&"resolved"!==d.state()?(0===c&&a.start(),b++,c++,d.always(function(){c--,0===c?(b=0,a.done()):a.set((b-c)/b)}),this):this}}(),a.render=function(c){if(a.isRendered())return document.getElementById("nprogress");i(document.documentElement,"nprogress-busy");var e=document.createElement("div");e.id="nprogress",e.innerHTML=b.template;var k,f=e.querySelector(b.barSelector),h=c?"-100":d(a.status||0),j=document.querySelector(b.parent);return g(f,{transition:"all 0 linear",transform:"translate3d("+h+"%,0,0)"}),b.showSpinner||(k=e.querySelector(b.spinnerSelector))&&l(k),j!=document.body&&i(j,"nprogress-custom-parent"),j.appendChild(e),e},a.remove=function(){j(document.documentElement,"nprogress-busy"),j(document.querySelector(b.parent),"nprogress-custom-parent");var a=document.getElementById("nprogress");a&&l(a)},a.isRendered=function(){return!!document.getElementById("nprogress")},a.getPositioningCSS=function(){var a=document.body.style,b="WebkitTransform"in a?"Webkit":"MozTransform"in a?"Moz":"msTransform"in a?"ms":"OTransform"in a?"O":"";return b+"Perspective"in a?"translate3d":b+"Transform"in a?"translate":"margin"};var f=function(){function b(){var c=a.shift();c&&c(b)}var a=[];return function(c){a.push(c),1==a.length&&b()}}(),g=function(){function c(a){return a.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(a,b){return b.toUpperCase()})}function d(b){var c=document.body.style;if(b in c)return b;for(var f,d=a.length,e=b.charAt(0).toUpperCase()+b.slice(1);d--;)if((f=a[d]+e)in c)return f;return b}function e(a){return a=c(a),b[a]||(b[a]=d(a))}function f(a,b,c){b=e(b),a.style[b]=c}var a=["Webkit","O","Moz","ms"],b={};return function(a,b){var d,e,c=arguments;if(2==c.length)for(d in b)void 0!==(e=b[d])&&b.hasOwnProperty(d)&&f(a,d,e);else f(a,c[1],c[2])}}();return a}),function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.toggle"),f="object"==typeof b&&b;e||d.data("bs.toggle",e=new c(this,f)),"string"==typeof b&&e[b]&&e[b]()})}var c=function(b,c){this.$element=a(b),this.options=a.extend({},this.defaults(),c),this.render()};c.VERSION="2.2.0",c.DEFAULTS={on:"On",off:"Off",onstyle:"primary",offstyle:"default",size:"normal",style:"",width:null,height:null},c.prototype.defaults=function(){return{on:this.$element.attr("data-on")||c.DEFAULTS.on,off:this.$element.attr("data-off")||c.DEFAULTS.off,onstyle:this.$element.attr("data-onstyle")||c.DEFAULTS.onstyle,offstyle:this.$element.attr("data-offstyle")||c.DEFAULTS.offstyle,size:this.$element.attr("data-size")||c.DEFAULTS.size,style:this.$element.attr("data-style")||c.DEFAULTS.style,width:this.$element.attr("data-width")||c.DEFAULTS.width,height:this.$element.attr("data-height")||c.DEFAULTS.height}},c.prototype.render=function(){this._onstyle="btn-"+this.options.onstyle,this._offstyle="btn-"+this.options.offstyle;var b="large"===this.options.size?"btn-lg":"small"===this.options.size?"btn-sm":"mini"===this.options.size?"btn-xs":"",c=a('<label class="btn">').html(this.options.on).addClass(this._onstyle+" "+b),d=a('<label class="btn">').html(this.options.off).addClass(this._offstyle+" "+b+" active"),e=a('<span class="toggle-handle btn btn-default">').addClass(b),f=a('<div class="toggle-group">').append(c,d,e),g=a('<div class="toggle btn" data-toggle="toggle">').addClass(this.$element.prop("checked")?this._onstyle:this._offstyle+" off").addClass(b).addClass(this.options.style);this.$element.wrap(g),a.extend(this,{$toggle:this.$element.parent(),$toggleOn:c,$toggleOff:d,$toggleGroup:f}),this.$toggle.append(f);var h=this.options.width||Math.max(c.outerWidth(),d.outerWidth())+e.outerWidth()/2,i=this.options.height||Math.max(c.outerHeight(),d.outerHeight());c.addClass("toggle-on"),d.addClass("toggle-off"),this.$toggle.css({width:h,height:i}),this.options.height&&(c.css("line-height",c.height()+"px"),d.css("line-height",d.height()+"px")),this.update(!0),this.trigger(!0)},c.prototype.toggle=function(){this.$element.prop("checked")?this.off():this.on()},c.prototype.on=function(a){return!this.$element.prop("disabled")&&(this.$toggle.removeClass(this._offstyle+" off").addClass(this._onstyle),this.$element.prop("checked",!0),void(a||this.trigger()))},c.prototype.off=function(a){return!this.$element.prop("disabled")&&(this.$toggle.removeClass(this._onstyle).addClass(this._offstyle+" off"),this.$element.prop("checked",!1),void(a||this.trigger()))},c.prototype.enable=function(){this.$toggle.removeAttr("disabled"),this.$element.prop("disabled",!1)},c.prototype.disable=function(){this.$toggle.attr("disabled","disabled"),this.$element.prop("disabled",!0)},c.prototype.update=function(a){this.$element.prop("disabled")?this.disable():this.enable(),this.$element.prop("checked")?this.on(a):this.off(a)},c.prototype.trigger=function(b){this.$element.off("change.bs.toggle"),b||this.$element.change(),this.$element.on("change.bs.toggle",a.proxy(function(){this.update()},this))},c.prototype.destroy=function(){this.$element.off("change.bs.toggle"),this.$toggleGroup.remove(),this.$element.removeData("bs.toggle"),this.$element.unwrap()};var d=a.fn.bootstrapToggle;a.fn.bootstrapToggle=b,a.fn.bootstrapToggle.Constructor=c,a.fn.toggle.noConflict=function(){return a.fn.bootstrapToggle=d,this},a(function(){a("input[type=checkbox][data-toggle^=toggle]").bootstrapToggle()}),a(document).on("click.bs.toggle","div[data-toggle^=toggle]",function(b){a(this).find("input[type=checkbox]").bootstrapToggle("toggle"),b.preventDefault()})}(jQuery);